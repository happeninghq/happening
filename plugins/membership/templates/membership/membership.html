{% extends "base.html" %}
{% load staticfiles %}
{% load widget_tweaks %}
{% load plugins %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="small-12 column">
                <h2>Membership</h2>
                {{"plugins.membership.configuration.MembershipMessage"|get_configuration}}
                {% if memberships|length > 0 %}
                    <h2>Your Membership</h2>
                    <table id="memberships">
                        <tr>
                            <th>#</th>
                            <th>Begin</th>
                            <th>End</th>
                            <th>Amount</th>
                        </tr>
                        {% for membership in memberships %}
                            <tr {% if membership.is_active %}class="active"{% endif %}>
                                <td>{{membership.payment_id}}</td>
                                <td>{{membership.start_time}}</td>
                                <td>{{membership.end_time}}</td>
                                <td>&pound;{{membership.amount}}</td>
                            </tr>
                        {% endfor %}
                    </table>
                {% endif %}


                <h2>Purchase Membership</h2>
                <p>Select the amount of money you feel your membership is worth.</p>
                <form method="POST" action="{% url "membership" member.pk %}">
                    {% csrf_token %}
                    {% for error in form.other_amount.errors %}
                    <div data-alert class="alert-box alert">
                        {{error}}
                    </div>
                    {% endfor %}
                    <label>Amount: {{form.amount}}</label>
                    <label id="other_amount">Other Amount (Â£): {{form.other_amount}}</label>
                    <button type="submit">Continue to payment</button>
                </form>
            </div>
        </p>
    </div>
{% endblock %}