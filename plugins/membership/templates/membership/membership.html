{% extends "base.html" %}
{% load staticfiles %}
{% load widget_tweaks %}
{% load plugins %}
{% load forms %}

{% block content %}
    <div class="l-container">
        <div class="l-primary-content block-list">
            <div class="block-list__item block">
                <header class="block__header">
                    <h2 class="block__header-text">Membership</h2>
                </header>
                {{"plugins.membership.configuration.MembershipMessage"|get_configuration}}
            </div>
            {% if memberships|length > 0 %}
                <div class="block-list__item block">
                    <header class="block__header">
                        <h2 class="block__header-text">Your Membership</h2>
                    </header>
                    <table id="memberships">
                        <tr>
                            <th>#</th>
                            <th>Begin</th>
                            <th>End</th>
                            <th>Amount</th>
                        </tr>
                        {% for membership in memberships %}
                            <tr {% if membership.is_active %}class="active"{% endif %}>
                                <td>{{membership.payment_id}}</td>
                                <td>{{membership.start_time}}</td>
                                <td>{{membership.end_time}}</td>
                                <td>&pound;{{membership.amount}}</td>
                            </tr>
                        {% endfor %}
                    </table>
                </div>
            {% endif %}


            <div class="block-list__item block">
                <header class="block__header">
                    <h2 class="block__header-text">Purchase Membership</h2>
                </header>
                <p>Select the amount of money you feel your membership is worth.</p>
                <form method="POST" action="{% url "membership" member.pk %}">
                    {% csrf_token %}
                    <!-- {% for error in form.other_amount.errors %}
                    <div data-alert class="alert-box alert">
                        {{error}}
                    </div>
                    {% endfor %}
                    <label>Amount: {{form.amount}}</label>
                    <label id="other_amount">Other Amount (Â£): {{form.other_amount}}</label> -->
                    {{form|render}}
                    <button type="submit">Continue to payment</button>
                </form>
            </div>
        </div>
    </div>
{% endblock %}